<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#ff6b6b">
    <title>Happy Birthday My Love 💕</title>
    <link rel="icon" href="images/foto5.jpg" type="image/png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(-45deg, #ff6b6b, #ffa500, #ff1744, #e91e63, #9c27b0);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
            min-height: 100vh;
            min-height: 100dvh;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container {
            position: relative;
            z-index: 2;
        }
        
        .hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            z-index: 0;
            pointer-events: none;
        }
        
        .heart {
            position: absolute;
            font-size: 20px;
            color: rgba(255, 255, 255, 0.8);
            animation: float 6s infinite ease-in-out;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) rotate(360deg);
                opacity: 0;
            }
        }

        html, body {
            overscroll-behavior: none;
            overflow-x: hidden;
        }
        
        .section {
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            text-align: center;
            z-index: 0;
            
        }

    
        

       
        /* ===== Love Section ===== */
        .love-section {
            display: none;
            position: relative;
        }

        .love-section h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            font-family: "Dancing Script", cursive;
            font-weight: 700;
        }

        .love-message {
            max-width: 360px;
            font-size: 1.1rem;
            line-height: 1.6;
            margin: 0 auto 1.5rem auto;
            background: rgba(255,255,255,0.15);
            padding: 1rem;
            border-radius: 16px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }



        /* ===== Tombol Umum ===== */
        
        .welcome-section {
            position: relative;
        }
        
        .welcome-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 3rem;
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 600px;
            transform: scale(0);
            animation: scaleIn 1s ease-out 0.5s forwards;
        }
        
        @keyframes scaleIn {
            to {
                transform: scale(1);
            }
        }
        
        .title {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from {
                text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #ff6b6b;
            }
            to {
                text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #ff6b6b;
            }
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            font-weight: 300;
        }
        
        .name-input {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .input-field {
            padding: 15px 20px;
            font-size: 1.1rem;
            border: none;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }
        
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .input-field:focus {
            outline: none;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 500;
            border: none;
            border-radius: 15px;
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
            font-family: 'Poppins', sans-serif;
            
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 107, 107, 0.4);
        }
        
        .message-section {
            display: none;
        }
        
        .message-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 3rem;
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 800px;
            animation: fadeInUp 3s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .birthday-title {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        .message-text {
            font-size: 1.2rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 2rem;
            text-align: left;
        }
        
        .wishes {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .wish-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-weight: 500;
            animation: wishFloat 3s infinite ease-in-out;
        }
        
        .wish-item:nth-child(odd) {
            animation-delay: 0.5s;
        }
        
        @keyframes wishFloat {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        .next-btn {
            margin-top: 2rem;
        }
        
        .surprise-section {
            display: none;
        }
        
        .cake {
            font-size: 8rem;
            margin: 1rem 0;
        }
        
        .final-message {
            font-size: 1.4rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.95);
            margin: 2rem 0;
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 2.1rem;
                margin-bottom: 1.5rem;
                display: flex;
            }
            
            .birthday-title {
                font-size: 1.6rem;
                text-align: center;
                color: pink;
            }
            
            .message-content, .welcome-content {
                padding: 2rem 1.5rem;
                margin: 0.5rem;
                border-radius: 20px;
            }
            
            .cake {
                font-size: 6rem;
                margin: 1rem 0;
            }
            
            .input-field, .btn {
                font-size: 1rem;
                padding: 18px 20px;
            }
            
            .message-text {
                font-size: 1.1rem;
                line-height: 1.7;
            }
            
            .final-message {
                font-size: 1.2rem;
                line-height: 1.7;
            }
            
            .subtitle {
                font-size: 1rem;
                margin-bottom: 1rem;
            }
            
            .wishes {
                gap: 0.8rem;
            }
            
            .wish-item {
                padding: 12px 18px;
                font-size: 0.95rem;
            }
            
            .title, .birthday-title {
                -webkit-user-select: none;
                user-select: none;
            }

            /* Mobile optimizations for new sections */
            .love-section h2 {
                font-size: 1.7rem;
            }

            .love-message {
                font-size: 1rem;
                padding: 0.8rem;
                max-width: 300px;
            }
        }
        
        .sparkle {
            position: absolute;
            font-size: 20px;
            color: #fff;
            animation: sparkle 5s infinite;
            z-index: 9999;
        }
        
        @keyframes sparkle {
            0%, 100% {
                opacity: 0;
                transform: scale(0);
            }
            50% {
                opacity: 1;
                transform: scale(1);
            }
        }
        /* MODAL */
        .modal {
            display: flex; 
            position: fixed; 
            z-index: 999; 
            padding-top: 20px; 
            left: 0; top: 0;
            width: 100%; height: 100%; 
            background-color: #333;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: #fff;
            margin: auto;
            padding: 10px;
            border-radius: 12px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .close {
            position: relative;
            justify-content: right;
            margin-left: 300px;
            top:-3px;
            font-size: 25px;
            font-weight: bold;
            cursor: pointer;
        }
        .pin-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
        }
        /* Modal Box */
        .pin-modal-content {
            background: #fff;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            width: 350px;
            animation: fadeIn 0.3s ease;
        }

        /* PIN input style */
        .pin-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
        }
        .pin-box {
            width: 45px;
            height: 55px;
            font-size: 24px;
            text-align: center;
            border: 2px solid #ccc;
            border-radius: 10px;
        }

        /* Animasi getar */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-10px); }
            40%, 80% { transform: translateX(10px); }
        }
        .shake {
            animation: shake 0.5s;
        }

        /* Fade in */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* hal3 */
        .hal3-section {
            position: relative;
            z-index: 2;
            padding: 0;
            margin: 0;
            min-height: 100vh;
            background: none;
        }
        .hal3-hearts {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        .hal3-heart {
            position: absolute;
            color: rgba(255,255,255,0.3);
            font-size: 20px;
            animation: hal3-float 6s ease-in-out infinite;
        }
        @keyframes hal3-float {
            0%,100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10%,90% { opacity: 1; }
            50% { transform: translateY(-10vh) rotate(180deg);}
        }
        .hal3-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
            justify-content: center;
        }
        .hal3-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            animation: hal3-slideInDown 1s ease-out;
        }
        @keyframes hal3-slideInDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .hal3-header h1 {
            color: white;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .hal3-header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.2em;
        }
        .hal3-upload-section {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            animation: hal3-slideInUp 1s ease-out 0.3s both;
        }
        @keyframes hal3-slideInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .hal3-upload-btn {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .hal3-upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        #hal3FileInput { display: none; }
        .hal3-scrapbook {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        .hal3-photo-frame {
            background: #ff6b6b;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: rotate(-2deg);
            transition: all 0.5s ease;
            opacity: 0;
            animation: hal3-photoAppear 0.8s ease-out forwards;
            position: relative;
        }
        .hal3-photo-frame:nth-child(even) { transform: rotate(2deg);}
        .hal3-photo-frame:hover {
            transform: rotate(0deg) scale(1.05);
            z-index: 10;
        }
        @keyframes hal3-photoAppear {
            0% { opacity: 0; transform: scale(0.3) rotate(180deg);}
            50% { transform: scale(1.1) rotate(-10deg);}
            100% { opacity: 1; transform: scale(1) rotate(-2deg);}
        }
        .hal3-photo-frame:nth-child(even) {
            animation: hal3-photoAppearEven 0.8s ease-out forwards;
        }
        @keyframes hal3-photoAppearEven {
            0% { opacity: 0; transform: scale(0.3) rotate(-180deg);}
            50% { transform: scale(1.1) rotate(10deg);}
            100% { opacity: 1; transform: scale(1) rotate(2deg);}
        }
        .hal3-photo-frame img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        .hal3-photo-caption { text-align: center; }
        .hal3-photo-caption input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            text-align: center;
            background: #f9f9f9;
            transition: border-color 0.3s ease;
        }
        .hal3-photo-caption input:focus {
            outline: none;
            border-color: #ff6b6b;
        }
        .hal3-delete-btn {
            position: absolute;
            top: 10px; right: 10px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px; height: 30px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
        }
        .hal3-delete-btn:hover {
            background: #ff3742;
            transform: scale(1.1);
        }
        .hal3-love-quotes {
            text-align: center;
            margin: 50px 0;
            padding: 30px;
            background: rgba(255,255,255,0.15);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            animation: hal3-slideInUp 1s ease-out 0.6s both;
        }
        .hal3-love-quotes h2 {
            color: white;
            margin-bottom: 20px;
            font-size: 2em;
        }
        .hal3-quote {
            color: rgba(255,255,255,0.9);
            font-size: 1.3em;
            font-style: italic;
            margin: 15px 0;
            opacity: 0;
            animation: hal3-fadeInText 2s ease-out forwards;
        }
        .hal3-quote:nth-child(2) { animation-delay: 1s;}
        .hal3-quote:nth-child(3) { animation-delay: 2s;}
        .hal3-quote:nth-child(4) { animation-delay: 3s;}
        @keyframes hal3-fadeInText {
            from { opacity: 0; transform: translateY(20px);}
            to { opacity: 1; transform: translateY(0);}
        }
        .hal3-sparkle {
            position: absolute;
            color: #ffd700;
            font-size: 1.5em;
            animation: hal3-sparkle 2s ease-in-out infinite;
            pointer-events: none;
        }
        @keyframes hal3-sparkle {
            0%,100% { opacity: 0; transform: scale(0);}
            50% { opacity: 1; transform: scale(1);}
        }
        @media (max-width: 768px) {
            .hal3-container { padding: 10px;}
            .hal3-header h1 { font-size: 2em;}
            .hal3-scrapbook { grid-template-columns: 1fr; gap: 20px;}
        }
        @keyframes hal3-photoDisappear {
            0% { opacity: 1; transform: scale(1) rotate(-2deg);}
            100% { opacity: 0; transform: scale(0) rotate(180deg);}
        }


        /* kado */
        .big-gift-icon {
            font-size: 10vw;
            display: block;
            margin: 0 auto;
            transition: transform 0.2s;
        }
        @media (max-width: 600px) {
            .big-gift-icon {
                font-size: 25vw;
            }
        }
        .btn:active .big-gift-icon {
            transform: scale(1.1) rotate(-10deg);
        }

        /* tetris */
        .tetris-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        }

        canvas#tetris {
        background: #111;
        border: 3px solid #ff69b4;
        border-radius: 10px;
        width: 100%;
        max-width: 400px;
        height: auto;
        }

        .game-controls {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 10px;
        gap: 10px;
        }

        .game-controls button {
        background: #ff69b4;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 18px;
        cursor: pointer;
        }

        .game-controls button:active {
        background: #d63c8a;
        }

        /* pop up tetris */
        .tetris-modal {
        display: none; 
        position: fixed;
        z-index: 1000;
        left: 0; top: 0;
        width: 100%; height: 100%;
        justify-content: center;
        align-items: center;
        margin-top: 10px;
        }

        .tetris-modal-content {
        background: white;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        max-width: 300px;
        width: 70%;
        }

        .tetris-modal-content button {
        background: #ff69b4;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        color: white;
        font-size: 16px;
        cursor: pointer;
        }
        /* akhir */

        #welcomeSection .welcome-content {
            border: none !important;
            box-shadow: none !important;
            background: none !important;
        }

    </style>
</head>
<audio id="bgMusic" loop>
  <source src="nadin.mp3" type="audio/mpeg">
</audio>
    <body>
        <div class="hearts" id="hearts"></div>
            <div class="container">
                <section class="section welcome-section" id="welcomeSection">
                    <div class="welcome-content" style="background: none; box-shadow: none; padding: 0;">
                        <button 
                            class="btn" 
                            onclick="openPinModal()" 
                            style="background: none; box-shadow: none; border: none; padding: 0; cursor: pointer;">
                            <span class="big-gift-icon">🎁</span>
                        </button>
                    </div>
            </div>

            <!-- Modal PIN -->
            <div id="pinModal" class="pin-modal">
            <div class="pin-modal-content">
                <h2>Anniversary🔒</h2>
                <div class="pin-container">
                <input type="password" inputmode="numeric" maxlength="1" class="pin-box" 
       oninput="moveNext(this, 'pin2')" 
       onkeydown="movePrev(event, null)" 
       id="pin1">
        <input type="password" inputmode="numeric" maxlength="1" class="pin-box" 
            oninput="moveNext(this, 'pin3')" 
            onkeydown="movePrev(event, 'pin1')" 
            id="pin2">

        <input type="password" inputmode="numeric" maxlength="1" class="pin-box" 
            oninput="moveNext(this, 'pin4')" 
            onkeydown="movePrev(event, 'pin2')" 
            id="pin3">

        <input type="password" inputmode="numeric" maxlength="1" class="pin-box" 
            oninput="moveNext(this, 'pin5')" 
            onkeydown="movePrev(event, 'pin3')" 
            id="pin4">

        <input type="password" inputmode="numeric" maxlength="1" class="pin-box" 
            oninput="moveNext(this, 'pin6')" 
            onkeydown="movePrev(event, 'pin4')" 
            id="pin5">

        <input type="password" inputmode="numeric" maxlength="1" class="pin-box" 
            oninput="checkAutoSubmit()" 
            onkeydown="movePrev(event, 'pin5')" 
            id="pin6">
                </div>
                <p id="errorMessage" style="color:red; display:none;">❌ Memang!kamu nda sayang sama aku</p>
            </div>
            </div>
            
            <!-- Birthday Message Section -->
            <section class="section message-section" id="messageSection">
                <div class="message-content">
                    <h2 class="birthday-title">🎉Selamat Ulang Tahun!🎉</h2>
                    <p class="message-text" id="personalMessage"></p>
                    
                    <button class="btn next-btn" onclick="showPhotos()">Memories! 📷</button>
                </div>
            </section>

            <!-- Photo Section -->
            <section class="hal3-section" id="hal3Section" style="display:none;">
                <div class="hal3-hearts"></div>
                    <div class="hal3-container">
                        <div class="hal3-upload-section">
                            <h1 style="color:white; margin-bottom: 10px; font-size: 4rem;">📷</h1>
                            <h2 style="color: white; margin-bottom: 20px;"> We Keep This Love In a Photograph</h2>
                            <button class="btn" onclick="document.getElementById('hal3FileInput').click()">
                                Upload Photos
                            </button>
                            <input type="file" id="hal3FileInput" accept="image/*" multiple>
                        </div>
                        <div class="hal3-scrapbook" id="hal3Scrapbook"></div>
                        <div class="hal3-love-quotes" style="background: none; box-shadow: none; padding: 0; border: none;">
                            <button class="btn" onclick="showLoveGame()">Tetris! 💕</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Modal Popup -->
            <div id="photoModal" class="modal" style="display:none;">
                <div class="modal-content">
                    <span class="close" onclick="closeModal()">&times;</span>
                    <img id="modalImg" src= "" alt="Foto Popup" style="max-width:100%; border-radius:10px;">
                    <p id="modalDesc" style="margin-top:10px; color:#333;"></p>
                </div>
            </div>

            <!-- Love Game Section -->
            <section class="section love-section" id="loveSection">
                <div class="message-content">
                    <h2>💕 Love Game 💕</h2>
                    <div class="love-message">
                    Ayo main Tetris bareng! 🎮
                    </div>

                    <div class="tetris-container">
                    <canvas id="tetris" width="360" height="560"></canvas>
                    <div class="game-controls">
                        <button onclick="moveLeft()">⬅️</button>
                        <button onclick="moveRight()">➡️</button>
                        <button onclick="rotatePiece()">🔄</button>
                        <button onclick="dropPiece()">⬇️</button>
                    </div>
                     <div id="gameOverModal" class="tetris-modal">
                        <div class="tetris-modal-content">
                            <h3>Game Over 😢</h3>
                            <p>Mau coba main lagi?</p>
                            <button onclick="restartGame()">Main Lagi 🔄</button>
                        </div>
                    </div>

                    <button class="btn" style="margin-top: 10px;" onclick="showFinalSurprise()">surprise! 🎁</button>
                </div>
            </section>
            
            <!-- Final Surprise Section -->
            <section class="section surprise-section" id="surpriseSection">
                <div class="message-content">
                    <div class="cake">🎂</div>
                    <h2 class="birthday-title" id="finalTitle">Happy Birthday 🎉</h2>
                    <p class="final-message">
                        happy birthday to my beautiful girl, you deserve the world and I always love you. 
                        you never gave up on me and for that I am forever grateful, thankful to have girlfriend like you!!
                        i will care about you, in every way i can💖
                    </p>
                </div>
            </section>
        </div>

        <script>

            // PIN
            const correctPin = "123456";

            function openPinModal() {
                document.getElementById("pinModal").style.display = "flex";
                document.getElementById("pin1").focus();
            }

            function moveNext(current, nextId) {
                if (current.value.length === 1 && nextId) {
                document.getElementById(nextId).focus();
                }
                checkAutoSubmit();
            }

            function checkAutoSubmit() {
                let pin = "";
                for (let i = 1; i <= 6; i++) {
                pin += document.getElementById("pin" + i).value;
                }

                if (pin.length === 6) {
                checkPin(pin);
                }
            }

            function checkPin(pin) {
                const errorMsg = document.getElementById("errorMessage");

                if (pin === correctPin) {
                errorMsg.style.display = "none";
                closePinModal();
                startSurprise();
                } else {
                errorMsg.style.display = "block";
                shakeModal();
                resetPin();
                }
            }

            function closePinModal() {
                document.getElementById("pinModal").style.display = "none";
                resetPin();
            }

            function resetPin() {
                for (let i = 1; i <= 6; i++) { document.getElementById("pin" + i).value = ""; 
                }
                document.getElementById("pin1").focus(); 
            }

            function movePrev(e, prevId) {
                if (e.key === "Backspace" && e.target.value === "" && prevId) {
                    document.getElementById(prevId).focus();
                }
            }

            // start surprise
            function startSurprise() {
                alert("🎉 Selamat datang di kejutan spesial! 💖");
            }

            function shakeModal() {
                const modal = document.querySelector(".pin-modal-content");
                modal.classList.add("shake");
                setTimeout(() => modal.classList.remove("shake"), 500);
            }
            
            
            // tesk ketik 
            function typeText() {
                const message = `Happy birthday my dear! ucapan saja tidak cukup untuk mengungkapkan betapa bahagianya aku melihatmu merayakan satu tahun lagi dalam hidupmu!
                My wish for you on your birthday is that you are, and will always be, happy and healthy. Don’t ever change!
                Semoga hari istimewa ini membawa banyak kebahagian dan keberkahan ditahun-tahun mendatang. Semoga setiap impian yang engkau simpan dalam hatimu perlahan menemukan jalannya.
                You deserve nothing but the very best, today and always.`;

                const container = document.getElementById('personalMessage');
                let index = 0;

                const chars = Array.from(message);

                function typeNext() {
                    if (index < chars.length) {
                        container.innerHTML += chars[index] === '\n' ? '<br><br>' : chars[index];
                        index++;
                        setTimeout(typeNext, 80);
                    }
                }

                typeNext();
            }

            function playMusic() {
                const music = document.getElementById('bgMusic');
                music.play().catch(err => {
                    console.log("Autoplay dicegah, menunggu interaksi user.", err);
                });
            }

            function startSurprise() {
                playMusic();

                if (window.navigator.vibrate) {
                    window.navigator.vibrate(200);
                }

                const welcomeSection = document.getElementById('welcomeSection');
                const messageSection = document.getElementById('messageSection');

                welcomeSection.classList.remove('active');

                setTimeout(() => {
                    welcomeSection.style.display = 'none';
                    messageSection.style.display = 'flex';
                    messageSection.classList.add('active');
                    createSparkles(messageSection);

                    typeText(); 
                }, 100);
            }


            // Scrapbook Digital (hal3) - script unik agar tidak bentrok
            (function() {
            const hardcodedPhotos = [
                "images/foto1.jpg",
                "images/foto2.jpg",
                "images/foto3.jpg"
            ];

            // Munculkan foto dari codingan
            hardcodedPhotos.forEach((src, i) => {
                setTimeout(() => {
                    hal3CreatePhotoFrame(src);
                    hal3CreateSparkles();
                }, i * 500);
            });

            // Upload foto dari input
            document.getElementById('hal3FileInput').addEventListener('change', function(e) {
                const files = e.target.files;
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        setTimeout(() => {
                            hal3CreatePhotoFrame(event.target.result);
                            hal3CreateSparkles();
                        }, i * 500);
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Buat frame foto
            function hal3CreatePhotoFrame(imageSrc) {
                const scrapbook = document.getElementById('hal3Scrapbook');
                const frame = document.createElement('div');
                frame.className = 'hal3-photo-frame';
                frame.innerHTML = `
                    <button class="hal3-delete-btn" onclick="hal3DeletePhoto(this)">×</button>
                    <img src="${imageSrc}" alt="Kenangan Kita">
                    <div class="hal3-photo-caption">
                        <input type="text" placeholder="Tulis caption untuk foto ini..." onchange="hal3SaveCaption(this)">
                    </div>
                `;
                scrapbook.appendChild(frame);
                setTimeout(() => { frame.style.animationDelay = '0s'; }, 100);
            }

            // Hapus foto
            window.hal3DeletePhoto = function(btn) {
                const frame = btn.parentElement;
                frame.style.animation = 'hal3-photoDisappear 0.5s ease-out forwards';
                setTimeout(() => { frame.remove(); }, 500);
            };

            // Simpan caption
            window.hal3SaveCaption = function(input) {
                console.log('Caption saved:', input.value);
            };

            // Sparkle efek
            function hal3CreateSparkles() {
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'hal3-sparkle';
                        sparkle.innerHTML = '✨';
                        sparkle.style.left = Math.random() * 100 + 'vw';
                        sparkle.style.top = Math.random() * 100 + 'vh';
                        document.body.appendChild(sparkle);
                        setTimeout(() => { sparkle.remove(); }, 2000);
                    }, i * 100);
                }
            }

        })();

            function showPhotos() {
                // Sembunyikan message section
                document.getElementById('messageSection').style.display = 'none';
                // Tampilkan scrapbook section
                document.getElementById('hal3Section').style.display = 'block';
                // Scroll ke scrapbook section (opsional)
                document.getElementById('hal3Section').scrollIntoView({ behavior: 'smooth' });
            }

            // TETRIS GAME
            const canvas = document.getElementById("tetris");
            const context = canvas.getContext("2d");
            context.scale(20, 20);

            const colors = [
            null,
            "#00f0f0", // I - Cyan
            "#0000f0", // J - Biru
            "#f0a000", // L - Orange
            "#f0f000", // O - Kuning
            "#00f000", // S - Hijau
            "#a000f0", // T - Ungu
            "#f00000", // Z - Merah
            ];

            function arenaSweep() {
            let rowCount = 1;
            outer: for (let y = arena.length - 1; y >= 0; --y) {
                for (let x = 0; x < arena[y].length; ++x) {
                if (arena[y][x] === 0) {
                    continue outer;
                }
                }
                const row = arena.splice(y, 1)[0].fill(0);
                arena.unshift(row);
                ++y;
            }
            }

            function collide(arena, player) {
            const m = player.matrix;
            const o = player.pos;
            for (let y = 0; y < m.length; ++y) {
                for (let x = 0; x < m[y].length; ++x) {
                if (
                    m[y][x] !== 0 &&
                    (arena[y + o.y] && arena[y + o.y][x + o.x]) !== 0
                ) {
                    return true;
                }
                }
            }
            return false;
            }

            function createMatrix(w, h) {
            const matrix = [];
            while (h--) {
                matrix.push(new Array(w).fill(0));
            }
            return matrix;
            }

            function createPiece(type) {
            if (type === "T") {
                return [
                [0, 0, 0],
                [1, 1, 1],
                [0, 1, 0],
                ];
            } else if (type === "O") {
                return [
                [2, 2],
                [2, 2],
                ];
            } else if (type === "L") {
                return [
                [0, 3, 0],
                [0, 3, 0],
                [0, 3, 3],
                ];
            } else if (type === "J") {
                return [
                [0, 4, 0],
                [0, 4, 0],
                [4, 4, 0],
                ];
            } else if (type === "I") {
                return [
                [0, 5, 0, 0],
                [0, 5, 0, 0],
                [0, 5, 0, 0],
                [0, 5, 0, 0],
                ];
            } else if (type === "S") {
                return [
                [0, 6, 6],
                [6, 6, 0],
                [0, 0, 0],
                ];
            } else if (type === "Z") {
                return [
                [7, 7, 0],
                [0, 7, 7],
                [0, 0, 0],
                ];
            }
            }

            function drawMatrix(matrix, offset) {
                matrix.forEach((row, y) => {
                    row.forEach((value, x) => {
                        if (value !== 0) {
                            context.fillStyle = colors[value];
                            context.fillRect(x + offset.x, y + offset.y, 1, 1);
                            context.strokeStyle = "rgba(255,255,255,0.7)";
                            context.lineWidth = 0.06;
                            context.strokeRect(x + offset.x, y + offset.y, 1, 1);
                        }
                    });
                });
            }

            function draw() {
            context.fillStyle = "#111";
            context.fillRect(0, 0, canvas.width, canvas.height);
            drawMatrix(arena, { x: 0, y: 0 });
            drawMatrix(player.matrix, player.pos);
            }

            function merge(arena, player) {
            player.matrix.forEach((row, y) => {
                row.forEach((value, x) => {
                if (value !== 0) {
                    arena[y + player.pos.y][x + player.pos.x] = value;
                }
                });
            });
            }

            function playerDrop() {
            player.pos.y++;
            if (collide(arena, player)) {
                player.pos.y--;
                merge(arena, player);
                playerReset();
                arenaSweep();
            }
            dropCounter = 0;
            }

            function playerMove(dir) {
            player.pos.x += dir;
            if (collide(arena, player)) {
                player.pos.x -= dir;
            }
            }

            function playerReset() {
                const pieces = "TJLOSZI";
                player.matrix = createPiece(
                    pieces[(pieces.length * Math.random()) | 0]
                );
                player.pos.y = 0;
                player.pos.x =
                    ((arena[0].length / 2) | 0) -
                    ((player.matrix[0].length / 2) | 0);

                // cek game over
                if (collide(arena, player)) {
                    showGameOver(); // munculkan modal
                    arena.forEach(row => row.fill(0)); // reset arena
                }
            }

            function showGameOver() {
                document.getElementById("gameOverModal").style.display = "flex";
            }

            function restartGame() {
                document.getElementById("gameOverModal").style.display = "none";
                playerReset();
            }

            function playerRotate() {
            const pos = player.pos.x;
            let offset = 1;
            rotate(player.matrix);
            while (collide(arena, player)) {
                player.pos.x += offset;
                offset = -(offset + (offset > 0 ? 1 : -1));
                if (offset > player.matrix[0].length) {
                rotate(player.matrix, -1);
                player.pos.x = pos;
                return;
                }
            }
            }

            function rotate(matrix, dir = 1) {
            for (let y = 0; y < matrix.length; ++y) {
                for (let x = 0; x < y; ++x) {
                [matrix[x][y], matrix[y][x]] = [
                    matrix[y][x],
                    matrix[x][y],
                ];
                }
            }
            if (dir > 0) {
                matrix.forEach(row => row.reverse());
            } else {
                matrix.reverse();
            }
            }

            let dropCounter = 0;
            let dropInterval = 400;
            let lastTime = 0;

            function update(time = 0) {
            const deltaTime = time - lastTime;
            lastTime = time;

            dropCounter += deltaTime;
            if (dropCounter > dropInterval) {
                playerDrop();
            }

            draw();
            requestAnimationFrame(update);
            }

            const arena = createMatrix(18, 28);
            const player = {
            pos: { x: 0, y: 0 },
            matrix: null,
            };

            document.addEventListener("keydown", event => {
            if (event.key === "ArrowLeft") {
                playerMove(-1);
            } else if (event.key === "ArrowRight") {
                playerMove(1);
            } else if (event.key === "ArrowDown") {
                playerDrop();
            } else if (event.key === "ArrowUp") {
                playerRotate();
            }
            });

            // kontrol mobile
            function moveLeft() { playerMove(-1); }
            function moveRight() { playerMove(1); }
            function dropPiece() { playerDrop(); }
            function rotatePiece() { playerRotate(); }

            let tetrisStarted = false;
            function startTetrisGame() {
                if (tetrisStarted) return;
                tetrisStarted = true;
                playerReset();
                update();
            }

            function showLoveGame() {
                document.getElementById('hal3Section').style.display = 'none';
                document.getElementById('loveSection').style.display = 'flex';
                document.getElementById('loveSection').scrollIntoView({ behavior: 'smooth' });
                startTetrisGame();
            }
            


            function showFinalSurprise() {
                if (window.navigator.vibrate) {
                    window.navigator.vibrate([100, 50, 100]);
                }
                
                const loveSection = document.getElementById('loveSection');
                const surpriseSection = document.getElementById('surpriseSection');
                
                loveSection.style.opacity = '0';
                loveSection.style.transform = 'translateY(-50px)';
                
                setTimeout(() => {
                    loveSection.style.display = 'none';
                    surpriseSection.style.display = 'flex';
                    surpriseSection.scrollIntoView({ behavior: 'smooth' });
                    createSparkles(surpriseSection);
                    setTimeout(() => {
                            startConfetti(200);
                    }, 500);
                }, 300);
            }
            
            function showSurprise() {
                if (window.navigator.vibrate) {
                    window.navigator.vibrate([100, 50, 100]);
                }
                
                const messageSection = document.getElementById('messageSection');
                const surpriseSection = document.getElementById('surpriseSection');
                
                messageSection.style.opacity = '0';
                messageSection.style.transform = 'translateY(-50px)';
                
                setTimeout(() => {
                    messageSection.style.display = 'none';
                    surpriseSection.style.display = 'flex';
                    surpriseSection.scrollIntoView({ behavior: 'smooth' });
                    createSparkles(surpriseSection);
                    setTimeout(() => {
                        for (let i = 0; i < 30; i++) {
                            createConfetti();
                        }
                    }, 500);
                }, 300);
            }

            // Create floating hearts
            function createHearts() {
                const heartsContainer = document.getElementById('hearts');
                const heartSymbols = ['💖', '💕', '💗', '💓', '💝', '🌹', '✨'];
                
                setInterval(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.innerHTML = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
                    heart.style.animationDelay = Math.random() * 2 + 's';
                    heartsContainer.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 8000);
                }, 300);
            }
            
            function createSparkles(element) {
                const sparkles = ['✨', '⭐', '💫', '🌟'];
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        const sparkle = document.createElement('div');
                        sparkle.className = 'sparkle';
                        sparkle.innerHTML = sparkles[Math.floor(Math.random() * sparkles.length)];
                        sparkle.style.left = Math.random() * 100 + '%';
                        sparkle.style.top = Math.random() * 100 + '%';
                        element.appendChild(sparkle);
                        
                        setTimeout(() => sparkle.remove(), 2000);
                    }, i * 200);
                }
            }
            
            function createConfetti() {
                const confetti = document.createElement('div');
                const confettiSymbols = ['🎉', '🎊', '🎈', '🎁', '🌈', '⭐', '✨'];
                confetti.innerHTML = confettiSymbols[Math.floor(Math.random() * confettiSymbols.length)];
                confetti.style.position = 'fixed';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.fontSize = Math.random() * 20 + 15 + 'px';
                confetti.style.zIndex = '1000';
                confetti.style.pointerEvents = 'none';
                confetti.style.animation = `float ${Math.random() * 3 + 2}s linear forwards`;
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 5000);
            }
            function startConfetti(amount = 50) {
                for (let i = 0; i < amount; i++) {
                    createConfetti();
                }
            }
            
            // Initialize hearts animation
            createHearts();
            // Add click effects to photos
            document.querySelectorAll('.photo').forEach(photo => {
                photo.addEventListener('click', function() {
                    this.style.transform = 'scale(1) rotate(5deg)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1) rotate(0deg)';
                    }, 100);
                    createSparkles(this);
                });
            });                                                                                                     
        </script>
    </body>
</html>